var ee=Object.defineProperty,te=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var D=(s,e,o)=>e in s?ee(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,B=(s,e)=>{for(var o in e||(e={}))ne.call(e,o)&&D(s,o,e[o]);if(V)for(var o of V(e))ae.call(e,o)&&D(s,o,e[o]);return s},M=(s,e)=>te(s,oe(e));var Z=(s,e,o)=>new Promise((i,h)=>{var C=l=>{try{p(o.next(l))}catch(b){h(b)}},v=l=>{try{p(o.throw(l))}catch(b){h(b)}},p=l=>l.done?i(l.value):Promise.resolve(l.value).then(C,v);p((o=o.apply(s,e)).next())});import{h as L,v as se,e as re,x as ie,q as ce,p as d,P as le,o as q,w as O}from"./index.js";import{d as U,Z as E,_ as z,$ as A,N as _,a1 as T,u,af as X,f as w,w as G,x as j,k as ue,J as fe,ag as ge,p as de,c as y,a8 as J,ad as pe,aa as he,a9 as N,ac as me,ab as K,ai as ye,aj as He,F as _e,E as ve,a0 as be}from"./vue-ea98dac5.js";import{u as Q}from"./useContentViewHeight-2c8d1d9b.js";import{o as Fe}from"./onMountedOrActivated-3eb95ecd.js";import{i as ke}from"./isNumber-f0336cfd.js";import{u as $e}from"./useWindowSizeFn-844b46eb.js";import{N as Ce}from"./antd-c2e94c83.js";const Se=U({name:"PageFooter",inheritAttrs:!1,__name:"PageFooter",setup(s){const{prefixCls:e}=L("page-footer"),{getCalcContentWidth:o}=se();return(i,h)=>(E(),z("div",{class:T(u(e)),style:X({width:u(o)})},[A("div",{class:T(`${u(e)}__left`)},[_(i.$slots,"left",{},void 0,!0)],2),_(i.$slots,"default",{},void 0,!0),A("div",{class:T(`${u(e)}__right`)},[_(i.$slots,"right",{},void 0,!0)],2)],6))}});const Y=re(Se,[["__scopeId","data-v-dafa78ce"]]);function Pe(s,e,o,i,h=0,C=w(0)){const v=w(null),{footerHeightRef:p}=Q();let l={useLayoutFooter:!0};const b=c=>{l=c};function W(){j(()=>{P()})}function F(c,R="all"){var m,k,$,n;function H(t){return Number(t.replace(/[^\d]/g,""))}let f=0;const g="0px";if(c){const t=getComputedStyle(c),r=H((m=t==null?void 0:t.marginTop)!=null?m:g),a=H((k=t==null?void 0:t.marginBottom)!=null?k:g),x=H(($=t==null?void 0:t.paddingTop)!=null?$:g),I=H((n=t==null?void 0:t.paddingBottom)!=null?n:g);R==="all"?(f+=r,f+=a,f+=x,f+=I):R==="top"?(f+=r,f+=x):(f+=a,f+=I)}return f}function S(c){return c==null?null:c instanceof HTMLDivElement?c:c.$el}function P(){return Z(this,null,function*(){var n;if(!s.value)return;yield j();const c=S(u(e));if(!c)return;const{bottomIncludeBody:R}=ie(c);let H=0;o.forEach(t=>{var r,a;H+=(a=(r=S(u(t)))==null?void 0:r.offsetHeight)!=null?a:0});let f=(n=F(c))!=null?n:0;i.forEach(t=>{f+=F(S(u(t)))});let g=0;function m(t,r){if(t&&r){const a=t.parentElement;a&&(ce(r)?a.classList.contains(r)?g+=F(a,"bottom"):(g+=F(a,"bottom"),m(a,r)):ke(r)&&r>0&&(g+=F(a,"bottom"),m(a,--r)))}}ue(h)?m(c,u(h)):m(c,h);let k=R-u(p)-u(C)-H-f-g;const $=()=>{var t;(t=l.elements)==null||t.forEach(r=>{var a,x;k+=(x=(a=S(u(r)))==null?void 0:a.offsetHeight)!=null?x:0})};l.useLayoutFooter&&u(p)>0,$(),v.value=k})}return Fe(()=>{j(()=>{P()})}),$e(()=>{P()},{wait:50,immediate:!0}),G(()=>[p.value],()=>{P()},{flush:"post",immediate:!0}),{redoHeight:W,setCompensation:b,contentHeight:v}}const Re=U({name:"PageWrapper",inheritAttrs:!1,__name:"PageWrapper",props:{title:d.string,dense:d.bool,ghost:d.bool,headerSticky:d.bool,headerStyle:Object,content:d.string,contentStyle:{type:Object},contentBackground:d.bool,contentFullHeight:d.bool.def(!1),contentClass:d.string,fixedHeight:d.bool,upwardSpace:d.oneOfType([d.number,d.string]).def(0)},setup(s){const e=s,o=fe(),i=ge(),h=w(null),C=w(null),v=w(null),p=w(null),{prefixCls:l}=L("page-wrapper");de(le,y(()=>e.fixedHeight));const b=y(()=>e.contentFullHeight),W=y(()=>e.upwardSpace),{redoHeight:F,setCompensation:S,contentHeight:P}=Pe(b,h,[C,p],[v],W);S({useLayoutFooter:!0,elements:[p]});const c=y(()=>{var n;return[l,{[`${l}--dense`]:e.dense},(n=o.class)!=null?n:{}]}),{headerHeightRef:R}=Q(),H=y(()=>{const{headerSticky:n}=e;return n?B({position:"sticky",top:`${u(R)}px`},e.headerStyle):{}}),f=y(()=>e.content||(i==null?void 0:i.headerContent)||e.title||m.value.length),g=y(()=>(i==null?void 0:i.leftFooter)||(i==null?void 0:i.rightFooter)),m=y(()=>Object.keys(q(i,"default","leftFooter","rightFooter","headerContent"))),k=y(()=>{const{contentFullHeight:n,contentStyle:t,fixedHeight:r}=e;if(!n)return B({},t);const a=`${u(P)}px`;return B(M(B({},t),{minHeight:a}),r?{height:a}:{})}),$=y(()=>{const{contentBackground:n,contentClass:t}=e;return[`${l}-content`,t,{[`${l}-content-bg`]:n}]});return G(()=>[g.value],()=>{F()},{flush:"post",immediate:!0}),(n,t)=>(E(),z("div",{class:T(c.value),ref_key:"wrapperRef",ref:h},[f.value?(E(),J(u(Ce),me({key:0,ghost:s.ghost,title:s.title},u(q)(n.$attrs,"class"),{style:H.value,ref_key:"headerRef",ref:C}),pe({default:N(()=>[s.content?(E(),z(_e,{key:0},[ve(be(s.content),1)],64)):_(n.$slots,"headerContent",{key:1})]),_:2},[he(m.value,r=>({name:r,fn:N(a=>[_(n.$slots,r,ye(He(a||{})))])}))]),1040,["ghost","title","style"])):K("",!0),A("div",{class:T(["overflow-hidden",$.value]),style:X(k.value),ref_key:"contentRef",ref:v},[_(n.$slots,"default")],6),g.value?(E(),J(Y,{key:1,ref_key:"footerRef",ref:p},{left:N(()=>[_(n.$slots,"leftFooter")]),right:N(()=>[_(n.$slots,"rightFooter")]),_:3},512)):K("",!0)],2))}});O(Y);const ze=O(Re);export{ze as P};
